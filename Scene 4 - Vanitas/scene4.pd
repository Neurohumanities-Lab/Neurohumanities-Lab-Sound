#N canvas 0 22 1920 1036 12;
#X declare -path ./abs;
#X declare -path ./abs;
#X declare -path ./abs/scenes;
#X msg 217 278 open ./voz.wav \, start;
#X obj 217 311 readsf~;
#X obj 548 650 *~ 0.9;
#X obj 548 674 else/drive~;
#X obj 548 698 hip~ 3;
#X obj 548 722 *~ 0.9;
#X obj 548 746 dac~ 1 2;
#X msg 100 285 stop;
#X obj -194 33 declare -path ./abs;
#X obj 666 531 else/plate.rev~;
#X obj 666 555 +~;
#X msg 731 499 wet 0.4 \, size 0.6 \, damp 0.5 \, pre 0;
#X obj 458 381 hsl 162 19 0 127 0 1 empty empty Boca -2 -10 0 12 #00ff04 #000000 #000000 15900 1;
#X obj 456 405 / 127;
#X obj 456 482 mtof;
#X obj 456 506 else/f2s~ 100;
#N canvas 0 102 1016 354 fear 0;
#X obj 30 124 audiolab/pp.fft-timbre~ 512 4;
#A saved empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \;;
#X obj 30 67 else/highpass~ 300 0.4;
#X obj 203 53 loadbang;
#X obj 30 38 inlet~;
#X obj 30 195 else/lowpass~ 4000 0.4;
#X obj 30 96 else/highpass~ 1000 0.4;
#X msg 203 81 curve-1 330 \, breakpoint-1 47 \, curve-2 533 \, breakpoint-2 26 \, rotate -78 \, shift 375 \, gain 20 \, dry/wet 90;
#X obj 30 166 else/highshelf~ 3000 0.4 9;
#X obj 792 253 switch~;
#X obj 640 182 line~;
#X obj 640 134 pow 2;
#X obj 640 205 sqrt~;
#X obj 760 134 sel 0;
#X msg 760 224 0;
#X msg 780 170 stop;
#X obj 30 224 *~;
#X obj 30 258 outlet~;
#X obj 640 110 == 3;
#X obj 760 110 == 3;
#X obj 640 86 r \$0-emotion-s;
#X obj 760 86 r \$0-emotion-s;
#X msg 640 158 \$1 100;
#X obj 760 199 delay 100;
#X connect 0 0 7 0;
#X connect 1 0 5 0;
#X connect 2 0 6 0;
#X connect 3 0 1 0;
#X connect 4 0 15 0;
#X connect 5 0 0 0;
#X connect 6 0 0 1;
#X connect 7 0 4 0;
#X connect 9 0 11 0;
#X connect 10 0 21 0;
#X connect 11 0 15 1;
#X connect 12 0 22 0;
#X connect 12 1 14 0;
#X connect 12 1 8 0;
#X connect 13 0 8 0;
#X connect 14 0 22 0;
#X connect 15 0 16 0;
#X connect 17 0 10 0;
#X connect 18 0 12 0;
#X connect 19 0 17 0;
#X connect 20 0 18 0;
#X connect 21 0 9 0;
#X connect 22 0 13 0;
#X restore 204 438 pd fear;
#X obj 650 722 audiolab/pp.fft-pitchshift~;
#A saved empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \;;
#X obj 780 696 +~ 0;
#X obj 785 673 *~ 500;
#X obj 756 626 lop~ 10000;
#X obj 742 573 phasor~ 5;
#X obj 1438 868 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 1438 892 metro 50;
#X obj 1438 916 tabwrite~ \$0-scope;
#N canvas 0 22 450 278 (subpatch) 0;
#X array \$0-scope 441 float 0;
#X coords 0 1 440 -1 200 140 1;
#X restore 1436 720 graph;
#N canvas 278 326 755 552 sadness 0;
#X obj 38 339 delread4~ \$0-vibrato;
#X obj 183 200 *~ 2;
#X obj 183 224 -~ 1;
#X obj 345 156 loadbang;
#X msg 345 180 1;
#X obj 345 204 metro 100;
#X obj 345 228 t b b;
#X obj 434 218 t f f;
#X obj 345 330 pack f f;
#X obj 345 280 + 100;
#X obj 345 304 dbtorms;
#X obj 345 354 line~;
#X obj 38 373 *~;
#X obj 434 194 rand.f 100 200;
#X obj 38 240 osc~ 5;
#X obj 111 242 osc~ 0.9;
#X obj 345 256 else/rand.f -6 9;
#X obj 38 96 loadbang;
#X msg 38 120 1;
#X obj 38 216 line~;
#X obj 38 143 metro 500;
#X msg 38 192 \$1 500;
#X obj 38 168 rand.f 4 6;
#X obj 183 171 phasor~ 0.5;
#X obj 183 254 else/lowpass~ 0.5 0.4;
#X obj 183 281 *~ 80;
#X obj 38 33 inlet~;
#X obj 38 310 +~ 90;
#X obj 610 456 switch~;
#X obj 458 385 line~;
#X obj 458 337 pow 2;
#X obj 458 408 sqrt~;
#X obj 578 337 sel 0;
#X msg 578 427 0;
#X msg 598 373 stop;
#X obj 38 427 *~;
#X obj 38 466 outlet~;
#X obj 458 313 == 5;
#X obj 578 313 == 5;
#X obj 458 288 r \$0-emotion-s;
#X obj 578 289 r \$0-emotion-s;
#X obj 38 57 delwrite~ \$0-vibrato 120;
#X obj 111 266 *~ 3;
#X msg 458 361 \$1 100;
#X obj 578 402 delay 100;
#X obj 38 269 *~ 1;
#X connect 0 0 12 0;
#X connect 1 0 2 0;
#X connect 2 0 24 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 16 0;
#X connect 6 1 13 0;
#X connect 7 0 5 1;
#X connect 7 1 8 1;
#X connect 8 0 11 0;
#X connect 9 0 10 0;
#X connect 10 0 8 0;
#X connect 11 0 12 1;
#X connect 12 0 35 0;
#X connect 13 0 7 0;
#X connect 14 0 45 0;
#X connect 15 0 42 0;
#X connect 16 0 9 0;
#X connect 17 0 18 0;
#X connect 18 0 20 0;
#X connect 19 0 14 0;
#X connect 20 0 22 0;
#X connect 21 0 19 0;
#X connect 22 0 21 0;
#X connect 23 0 1 0;
#X connect 24 0 25 0;
#X connect 25 0 27 0;
#X connect 26 0 41 0;
#X connect 27 0 0 0;
#X connect 29 0 31 0;
#X connect 30 0 43 0;
#X connect 31 0 35 1;
#X connect 32 0 44 0;
#X connect 32 1 34 0;
#X connect 32 1 28 0;
#X connect 33 0 28 0;
#X connect 34 0 44 0;
#X connect 35 0 36 0;
#X connect 37 0 30 0;
#X connect 38 0 32 0;
#X connect 39 0 37 0;
#X connect 40 0 38 0;
#X connect 42 0 27 0;
#X connect 43 0 29 0;
#X connect 44 0 33 0;
#X connect 45 0 27 0;
#X restore 354 438 pd sadness;
#N canvas 299 349 672 300 disgust 0;
#N canvas 352 24 545 673 fft-analysis 0;
#X obj 92 534 *~;
#X obj 53 534 *~;
#X obj 330 325 *~;
#X obj 298 325 *~;
#X obj 298 351 +~;
#X obj 53 176 *~;
#X obj 53 151 inlet~;
#X obj 53 199 rfft~;
#X obj 53 603 *~;
#X obj 144 238 *~;
#X obj 298 297 rfft~;
#X obj 53 568 rifft~;
#X obj 53 636 outlet~;
#X obj 110 238 *~;
#X obj 110 261 +~;
#X text 379 355 modulus;
#X obj 110 443 *~;
#X obj 357 459 block~ 1024 4;
#X obj 110 391 clip~;
#X obj 86 177 tabreceive~ \$0-hann;
#X obj 356 499 loadbang;
#X obj 143 342 r squelch;
#X obj 142 365 expr 0.01*$f1*$f1;
#X obj 110 287 +~ 1e-20;
#X obj 110 503 *~ 0.00065;
#X obj 86 603 tabreceive~ \$0-hann;
#X obj 298 268 *~;
#X obj 298 239 inlet~;
#X obj 331 269 tabreceive~ \$0-hann;
#X text 379 372 of control;
#X text 377 389 amplitude;
#X text 187 242 reciprocal;
#X text 190 261 modulus of;
#X text 186 281 filter input;
#X text 187 300 amplitude;
#X text 114 152 filter input;
#X text 363 239 control source;
#X text 360 296 Fourier transform;
#X text 43 19 Internal workings of the timbre stamping algorithm. First the "filter input" is treated as in the compressor patch \, multiplying each channel amplitude by one over its modulus (but limited by the "squelch" parameter.) It is then multiplied by the modulus of the channel amplitude for the control source (which is Fourier analyzed in parallel with the filter input.);
#X text 148 440 multiply the two amplitude;
#X text 146 457 factors (for compression;
#X text 148 473 and to apply new timbre);
#X obj 110 314 rsqrt~;
#X obj 298 374 sqrt~;
#X msg 356 523 \; window-size 1024 \; squelch 100 \;;
#X connect 0 0 11 1;
#X connect 1 0 11 0;
#X connect 2 0 4 1;
#X connect 3 0 4 0;
#X connect 4 0 43 0;
#X connect 5 0 7 0;
#X connect 6 0 5 0;
#X connect 7 0 13 0;
#X connect 7 0 13 1;
#X connect 7 0 1 0;
#X connect 7 1 9 0;
#X connect 7 1 9 1;
#X connect 7 1 0 0;
#X connect 8 0 12 0;
#X connect 9 0 14 1;
#X connect 10 0 3 0;
#X connect 10 0 3 1;
#X connect 10 1 2 0;
#X connect 10 1 2 1;
#X connect 11 0 8 0;
#X connect 13 0 14 0;
#X connect 14 0 23 0;
#X connect 16 0 24 0;
#X connect 18 0 16 0;
#X connect 19 0 5 1;
#X connect 20 0 44 0;
#X connect 21 0 22 0;
#X connect 22 0 18 2;
#X connect 23 0 42 0;
#X connect 24 0 0 1;
#X connect 24 0 1 1;
#X connect 25 0 8 1;
#X connect 26 0 10 0;
#X connect 27 0 26 0;
#X connect 28 0 26 1;
#X connect 42 0 18 0;
#X connect 43 0 16 1;
#X restore 164 166 pd fft-analysis;
#N canvas 163 152 567 523 hann-window 0;
#N canvas 0 0 450 300 (subpatch) 0;
#X array \$0-hann 1024 float 0;
#X coords 0 1 1023 0 300 100 1;
#X restore 110 394 graph;
#X obj 327 184 osc~;
#X obj 327 209 *~ -0.5;
#X obj 327 233 +~ 0.5;
#X obj 310 276 tabwrite~ \$0-hann;
#X obj 86 113 r window-size;
#X obj 157 237 /;
#X obj 175 205 samplerate~;
#X obj 157 315 s window-sec;
#X obj 67 251 swap;
#X obj 67 275 /;
#X obj 67 299 s window-hz;
#X obj 168 265 * 1000;
#X obj 168 292 s window-msec;
#X obj 86 148 t f b f;
#X msg 175 155 resize \$1;
#X obj 175 179 s \$0-hann;
#X obj 279 122 r window-hz;
#X msg 352 154 0;
#X obj 279 150 t f b;
#X text 56 20 calculate Hann window table (variable window size) and constants window-hz (fundamental frequency of analysis) \, window-sec and window-msec (analysis window size in seconds and msec)., f 56;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 5 0 14 0;
#X connect 6 0 8 0;
#X connect 6 0 12 0;
#X connect 7 0 6 1;
#X connect 7 0 9 1;
#X connect 9 0 10 0;
#X connect 9 1 10 1;
#X connect 10 0 11 0;
#X connect 12 0 13 0;
#X connect 14 0 6 0;
#X connect 14 0 9 0;
#X connect 14 1 7 0;
#X connect 14 2 15 0;
#X connect 15 0 16 0;
#X connect 17 0 19 0;
#X connect 18 0 1 1;
#X connect 19 0 1 0;
#X connect 19 1 4 0;
#X connect 19 1 18 0;
#X restore 31 176 pd hann-window;
#X obj 154 127 else/pulse~ 12;
#X obj 276 127 inlet~;
#X obj 164 205 *~;
#X obj 501 233 switch~;
#X obj 349 162 line~;
#X obj 349 114 pow 2;
#X obj 349 186 sqrt~;
#X obj 469 114 sel 0;
#X msg 469 204 0;
#X msg 489 150 stop;
#X obj 349 90 == 2;
#X obj 469 90 == 2;
#X obj 164 239 outlet~;
#X obj 349 66 r \$0-emotion-s;
#X obj 469 66 r \$0-emotion-s;
#X msg 349 138 \$1 100;
#X obj 469 179 delay 100;
#X connect 0 0 4 0;
#X connect 2 0 0 0;
#X connect 3 0 0 1;
#X connect 4 0 14 0;
#X connect 6 0 8 0;
#X connect 7 0 17 0;
#X connect 8 0 4 1;
#X connect 9 0 18 0;
#X connect 9 1 11 0;
#X connect 9 1 5 0;
#X connect 10 0 5 0;
#X connect 11 0 18 0;
#X connect 12 0 7 0;
#X connect 13 0 9 0;
#X connect 15 0 12 0;
#X connect 16 0 13 0;
#X connect 17 0 6 0;
#X connect 18 0 10 0;
#X restore 124 438 pd disgust;
#N canvas 320 372 1014 280 anger 0;
#X obj 84 176 *~ 0.2;
#X obj 84 105 else/eq~ 2000 100 20;
#X obj 84 129 else/drive~ 60;
#X obj 84 153 hip~ 100;
#X obj 24 176 *~ 0.1;
#X obj 24 42 inlet~;
#X obj 391 243 switch~;
#X obj 239 172 line~;
#X obj 239 100 == 1;
#X obj 239 124 pow 2;
#X obj 239 196 sqrt~;
#X obj 359 124 sel 0;
#X msg 359 214 0;
#X msg 379 160 stop;
#X obj 359 100 == 1;
#X obj 84 215 *~;
#X obj 84 239 outlet~;
#X obj 239 76 r \$0-emotion-s;
#X obj 359 76 r \$0-emotion-s;
#X obj 84 80 -~ 0.02;
#X msg 239 148 \$1 100;
#X obj 359 189 delay 100;
#X connect 0 0 15 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 0 0;
#X connect 4 0 15 0;
#X connect 5 0 4 0;
#X connect 5 0 19 0;
#X connect 7 0 10 0;
#X connect 8 0 9 0;
#X connect 9 0 20 0;
#X connect 10 0 15 1;
#X connect 11 0 21 0;
#X connect 11 1 13 0;
#X connect 11 1 6 0;
#X connect 12 0 6 0;
#X connect 13 0 21 0;
#X connect 14 0 11 0;
#X connect 15 0 16 0;
#X connect 17 0 8 0;
#X connect 18 0 14 0;
#X connect 19 0 1 0;
#X connect 20 0 7 0;
#X connect 21 0 12 0;
#X restore 54 438 pd anger;
#N canvas 341 395 677 292 happiness 0;
#X obj 12 70 audiolab/pp.fft-pitchshift~;
#A saved empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \; empty_slot \;;
#X msg 185 41 transposition 1200;
#X obj 185 12 loadbang;
#X obj 12 41 inlet~;
#X obj 496 195 switch~;
#X obj 344 124 line~;
#X obj 344 76 pow 2;
#X obj 344 147 sqrt~;
#X obj 464 76 sel 0;
#X msg 464 166 0;
#X msg 484 112 stop;
#X obj 344 52 == 4;
#X obj 464 52 == 4;
#X obj 12 164 *~;
#X obj 12 188 outlet~;
#X obj 344 27 r \$0-emotion-s;
#X obj 464 28 r \$0-emotion-s;
#X msg 344 100 \$1 100;
#X obj 464 141 delay 100;
#X connect 0 0 13 0;
#X connect 1 0 0 2;
#X connect 2 0 1 0;
#X connect 3 0 0 0;
#X connect 5 0 7 0;
#X connect 6 0 17 0;
#X connect 7 0 13 1;
#X connect 8 0 18 0;
#X connect 8 1 10 0;
#X connect 8 1 4 0;
#X connect 9 0 4 0;
#X connect 10 0 18 0;
#X connect 11 0 6 0;
#X connect 12 0 8 0;
#X connect 13 0 14 0;
#X connect 15 0 11 0;
#X connect 16 0 12 0;
#X connect 17 0 5 0;
#X connect 18 0 9 0;
#X restore 264 438 pd happiness;
#X obj 664 142 hradio 19 1 0 8 \$0-emotion-s \$0-emotion-r empty 0 -10 0 12 #fcfcfc #000000 #000000 0;
#X obj 456 458 + 60;
#X obj 456 434 * 75;
#X obj 381 536 else/lowpass~ 4000 0.7;
#X obj 381 565 else/lowpass~ 4000 0.7;
#X obj 381 594 else/lowpass~ 4000 0.7;
#X obj 687 234 i;
#X obj 687 205 t f b;
#X obj 655 301 i;
#X obj 655 272 t f b;
#X obj 664 166 t f f;
#X floatatom 767 204 5 0 0 0 - - - 0;
#X floatatom 717 261 5 0 0 0 - - - 0;
#X floatatom 655 325 5 0 0 0 - - - 0;
#X obj 767 227 s \$0-emotion1;
#X obj 717 284 s \$0-emotion2;
#X obj 655 348 s \$0-emotion3;
#X obj 920 254 sel 0;
#N canvas 0 22 450 278 (subpatch) 0;
#X array \$0-emotionAcum 7 float 0;
#X coords 0 10 6 0 200 140 1 0 0;
#X restore 1195 284 graph;
#X obj 950 322 tabread \$0-emotionAcum;
#X obj 950 346 + 1;
#X obj 952 288 t f f;
#X obj 950 370 tabwrite \$0-emotionAcum;
#X obj 166 78 declare -path ./abs;
#X obj 166 108 declare -path ./abs/scenes;
#X obj 1279 113 r \$0-emotion3;
#X obj 1386 108 r \$0-emotion2;
#X obj 1504 104 r \$0-emotion1;
#X obj 1279 161 expr $f1 + $f2 + $f3;
#X obj 1279 185 > 0;
#X obj 1280 136 == 1;
#X obj 1386 132 == 1;
#X obj 1504 128 == 1;
#X floatatom 1279 209 5 0 0 0 - - - 0;
#X text 1322 213 on/off;
#X connect 0 0 1 0;
#X connect 1 0 26 0;
#X connect 1 0 29 0;
#X connect 1 0 28 0;
#X connect 1 0 27 0;
#X connect 1 0 16 0;
#X connect 1 1 0 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 5 0 6 1;
#X connect 7 0 1 0;
#X connect 9 0 10 0;
#X connect 9 1 10 1;
#X connect 10 0 2 0;
#X connect 11 0 9 0;
#X connect 12 0 13 0;
#X connect 13 0 32 0;
#X connect 14 0 15 0;
#X connect 15 0 33 1;
#X connect 15 0 34 1;
#X connect 15 0 35 1;
#X connect 16 0 33 0;
#X connect 18 0 17 1;
#X connect 19 0 18 0;
#X connect 20 0 19 0;
#X connect 21 0 20 0;
#X connect 22 0 23 0;
#X connect 23 0 24 0;
#X connect 26 0 33 0;
#X connect 27 0 33 0;
#X connect 28 0 33 0;
#X connect 29 0 33 0;
#X connect 30 0 40 0;
#X connect 31 0 14 0;
#X connect 32 0 31 0;
#X connect 33 0 34 0;
#X connect 34 0 35 0;
#X connect 35 0 2 0;
#X connect 35 0 9 0;
#X connect 36 0 39 0;
#X connect 36 0 42 0;
#X connect 37 0 36 1;
#X connect 37 1 36 0;
#X connect 38 0 43 0;
#X connect 39 0 38 1;
#X connect 39 1 38 0;
#X connect 40 0 37 0;
#X connect 40 1 41 0;
#X connect 41 0 44 0;
#X connect 41 0 47 0;
#X connect 42 0 45 0;
#X connect 43 0 46 0;
#X connect 47 1 51 0;
#X connect 49 0 50 0;
#X connect 50 0 52 0;
#X connect 51 0 49 0;
#X connect 51 1 52 1;
#X connect 55 0 60 0;
#X connect 56 0 61 0;
#X connect 57 0 62 0;
#X connect 58 0 59 0;
#X connect 59 0 63 0;
#X connect 60 0 58 0;
#X connect 61 0 58 1;
#X connect 62 0 58 2;
